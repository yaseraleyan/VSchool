<!DOCTYPE html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>posts Rating</title>

    <!-- Latest compiled and minified CSS -->
   
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <link rel="stylesheet" href="http://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link rel='stylesheet' href='../css/style.css'>
    <!-- Latest compiled and minified JavaScript -->

</head>

<body ng-app="app" ng-controller="ctrl" ng-init='get();'>
    <div class='container'>
        <div class='jumbotron'>
<div class='textAreaAndButton'>
   <textarea  ng-model='post' class="form-control postTextArea" rows="5"  placeholder='write any thing......'></textarea>
   
   <input type='url' placeholder='image URL' ng-model='image' class="form-control postTextArea">
   <center>
    <button id='addbtn'  ng-click='addPost()' class='btn btn-primary postBtn'>post</button>
        
    </center>
    </div>
    
    <div ng-repeat = 'post in posts.data | orderBy:"-likes"'>
    
    <div class="card w-75 post" >
        <span id='remove' class='glyphicon glyphicon-remove' ng-click='remove(post._id)'></span>
        

    
        
  <div class="card-block" ng-init='isEditible=false; showCommentField=false'>
     
      <p contentEditable={{isEditible}} autofocus="autofocus" class="card-text" id='{{$index}}'>{{post.post}}</p>
      
      <img id='postImg' ng-src='{{post.image}}' />
    <span id='like' class="glyphicon glyphicon-thumbs-up postIcons" ng-click='like(post._id,post.post,post.likes,post.disLikes)'>{{post.likes}}</span>
    <span id='dislike' class="glyphicon glyphicon-thumbs-down postIcons" ng-click='disLike(post._id,post.post,post.likes,post.disLikes)'>{{post.disLikes}}</span>
      <span id='edit' class='glyphicon glyphicon-pencil postIcons' ng-click='isEditible=true' ng-show='!isEditible'></span>
      <span id='comment' class='glyphicon glyphicon-comment postIcons' ng-click='showComments=!showComments;getComments(post._id)'></span>
      <span id='applyEdits' ng-if='isEditible' ng-click='edit(post._id,$index,post.likes,post.disLikes)' class='glyphicon glyphicon-ok postIcons'></span>
  </div>
        <div ng-show='showComments' class='commentsBlock'>
        <hr>
        <input id='commentTextField' ng-model='comment'  placeholder='comment' type='text' class='form-control'>
            <button ng-click='addComment(post._id, comment)' class='commentbtn'>add</button>
            <p ng-repeat='c in comments track by $index'><span>{{c}}</span></p>
            
        </div>
</div>
    </div>
    
    



        </div>
    </div>

     <script src='../js/jquery-3.1.1.min.js'></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="../js/angular.min.js"></script>
    
    <script src="../js/app.js"></script>

</body>

</html>